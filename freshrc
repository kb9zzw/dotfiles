# vim: set ft=sh:

# handles updating fresh
fresh freshshell/fresh bin/fresh --bin

# gitconfig
fresh gitconfig --file
fresh gitignore --file

# Backup existing files
for file in ~/.bashrc ~/.bash_profile ~/.zshrc
do
  if [ -e "$file" ] && [ ! -L "$file" ]
  then
    mv -f $file $file.bak
  fi
done

# bash
if command -v bash &> /dev/null
then
  fresh-options --file=~/.bash_profile --marker
    # OS-specific stuff
    if [[ "$(uname)" == "Darwin" ]]; then
      fresh shell/bash/mac.sh
    fi

    # Base profile settings
    fresh shell/bash/base.sh
    fresh shell/bash/fresh.sh
    fresh shell/bash/ls.sh
    fresh shell/bash/git.sh
    fresh shell/bash/notes.sh
    fresh shell/bash/docker.sh
    fresh shell/bash/python.sh
  fresh-options
  fresh shell/bash/bashrc --file
fi

# zsh
if command -v zsh &> /dev/null
then
  fresh-options --file=~/.zshrc --marker
    fresh shell/zsh/base.zsh
  fresh-options
fi

# vim
if command -v vim &> /dev/null || command -v nvim &> /dev/null
then
  fresh-options --file=~/.vimrc --marker=\"
    fresh vim/vundle_before.vim
    fresh vim/vundle.vim
    fresh vim/vundle_after.vim
    fresh vim/vimrc
  fresh-options

  fresh vim/ftplugin/python.vim --file=~/.vim/after/ftplugin/python.vim

  init_vim() {
    if which vim &> /dev/null && ! [ -d $HOME/.vim/bundle/vundle ]; then
      vim || [ -d $HOME/.vim/bundle/vundle ]
    fi
  }

  fresh_after_build() {
    init_vim
  }
fi

# neovim
if command -v nvim &> /dev/null
then
  fresh nvim/init.vim --file=~/.config/nvim/init.vim
fi

# terminator
if command -v terminator &> /dev/null
then
    fresh terminator/config --file=~/.config/terminator/config
fi

# yamllint
if command -v yamllint &> /dev/null
then
    fresh yamllint/config --file=~/.config/yamllint/config
fi

# pylint
if command -v pylint &> /dev/null
then
    fresh pylintrc --file=~/.pylintrc
fi
